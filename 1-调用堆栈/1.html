<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>执行栈/执行上下文简单理解</title>
</head>
<body>
    <script>
        // 1
         var a = 'JavaScript';
         function first() {
             console.log('first');
             second();
             console.log('second2');
         }
         function second() {
             console.log('second1');
         }
         first();

        // 2
        var scope = 'global scope';
        function checkscope(){
            var scope = 'local scope';
            function f(){
                return scope;
            }
            return f();
        }
        checkscope(); // 执行checkscope()，return f();再执行 f(),return scope

        // ECStack.push(<checkscope> functionContext)
        // ECStack.push(<f> functionContext)
        // ECStack.pop()
        // ECStack.pop()

        // 3
        var scope = 'global scope';
        function checkscope(){
            var scope = 'local scope';
            function f(){
                return scope;
            }
            return f;
        }
        checkscope()(); // 先执行checkscope()，return f;checkscope()执行完毕，弹出;再执行f(),return scope

        // ECStack.push(<checkscope> functionContext)
        // ECStack.pop()
        // ECStack.push(<f> functionContext)
        // ECStack.pop()

        // 4
        function fn(a,c) {
          console.log(a);//function a() { }
          var a = 123;
          console.log(a); // 123
          console.log(c); //function c() { }
          function a() { }
          if(false){
              var d = 678; //不执行
          }
          console.log(d); //undefined
          console.log(b); // undefined
          var b = function () { }
          console.log(b); //function () { }
          function c() { }
          console.log(c); // function c() { }
        }
        fn(1,2); // 实参和形参统一
        /*
        * 先找形参和变量声明
        * 实参和形参统一
        * 找函数声明，如果存在同名的替代变量对象
        * 最后一行一行执行代码
        *
        * AO:
        *  a:undefined（找形参和变量声明）   1（实参和形参统一）    function a() { } (找函数声明)
        *  c:undefined   2    function c() { }
        *  d:undefined
        *  b:undefined
        * */

        // 5
        console.log(b); // undefined
        console.log(test); // function test () {}
        function test(a) {
           console.log(c); //undefind
           var a = b = 345 // 相当于： var a = 345 ; b = 345,b为全局的修改了变量
            c = 9
            if(false){
                var c = 789
            }
            console.log(a) //345
            console.log(c) // 9
        }
        test(234)
        console.log(b)//345
        console.log(test) // function test (){}
        var test = 123
        var b = 456
        /*
        *
        * VO:{
        *  test:undefined   function test () {}
        *  b:undefined 345
        * }
        * AO:{
        * a: undefined 234 345
        * c: undefined 9
        *
        * }
        *
        * */


    </script>
</body>
</html>